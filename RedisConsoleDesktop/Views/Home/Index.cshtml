@page
@addTagHelper *, Kendo.Mvc
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@using RedisConsoleDesktop.Models

@(Html.Kendo().Grid<RedisInstanceGridViewModel>()
    .Name("instancesGrid")
    .Columns(columns => {
        //columns.Command(command => command.Custom("Edit").Text("&nbsp;").IconClass("mdi mdi-edit").Click("editPiPlanning")).Title("Edit").Width(100);
        
        columns.Bound(p => p.Key);

        //columns.Command(command => command.Custom("AddTeam").Text("&nbsp;").IconClass("mdi mdi-account-add").Click("addTeam")).Title("Add Team").Width(100);
        //columns.Command(command => command.Custom("Delete").Text("&nbsp;").IconClass("mdi mdi-delete").Click("deletePiPlanning")).Title("Delete").Width(100);
    })
       .ToolBar(tools =>
      {
          tools.Custom().Name("addInstance").Text("&nbsp;New Instance").IconClass("k-icon k-i-plus").HtmlAttributes(new { Href = "/Instances/Create" });
          //tools.Excel();
      })
    .Pageable(pager => pager
        .Refresh(true)
    )
    .Sortable()
      .Scrollable(s => s.Height("auto"))
    .Filterable()
    //.Reorderable(r => r.Columns(true))
    .Resizable(r => r.Columns(true))
    .HtmlAttributes(new { style = "height:100%;" })
    .DataSource(dataSource => dataSource
        .Ajax()
        .PageSize(20)
        .Read(read => read.Action("Instances_Read", "Home"))
     )
       .Events(events => events.DataBound("dataBound"))
)


<script>
    $(window).resize(function () {
        resizeGrid();
    });



    function resizeGrid() {
        $(".k-grid-content").css("height", $(window).height() - GridBottomPadding);
    }

    function dataBound() {
        resizeGrid();
        //this.expandRow(this.tbody.find("tr.k-master-row").first());
    }
</script>
